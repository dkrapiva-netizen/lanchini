<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Товар — LANCHINI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="container header__inner">
      <a href="../index.html" class="header__logo">LANCH<span>INI</span></a>
      <nav class="header__nav" id="nav">
        <a href="../index.html">Главная</a>
        <a href="catalog.html">Каталог</a>
        <a href="about.html">О нас</a>
        <a href="delivery.html">Доставка</a>
        <a href="contacts.html">Контакты</a>
      </nav>
      <div class="header__actions">
        <div class="header__search">
          <input type="text" id="search-input" placeholder="Поиск...">
          <button class="header__search-btn" id="search-btn">&#128269;</button>
        </div>
        <a href="cart.html" class="header__cart" id="cart-icon">
          &#128722;
          <span class="header__cart-count" id="cart-count" style="display:none;">0</span>
        </a>
        <button class="header__burger" id="burger" aria-label="Меню">
          <span></span><span></span><span></span>
        </button>
      </div>
    </div>
  </header>

  <!-- BREADCRUMB -->
  <div class="container">
    <div class="breadcrumb">
      <a href="../index.html">Главная</a> <span>&#8250;</span> <a href="catalog.html">Каталог</a> <span>&#8250;</span> <span id="breadcrumb-name"></span>
    </div>
  </div>

  <!-- PRODUCT PAGE -->
  <section class="product-page">
    <div class="container">
      <div class="product-page__inner" id="product-content">
        <!-- Injected by JS -->
      </div>

      <!-- SIMILAR PRODUCTS -->
      <div class="similar">
        <div class="section__header">
          <h2 class="section__title">Вам также понравится</h2>
        </div>
        <div class="products-grid" id="similar-products"></div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <div class="footer__inner">
        <div>
          <div class="footer__brand">LANCH<span>INI</span></div>
          <p class="footer__about">Мы создаём подарочные чайные пары, которые приносят радость и украшают чаепитие.</p>
        </div>
        <div>
          <h4 class="footer__heading">Магазин</h4>
          <div class="footer__links">
            <a href="catalog.html">Каталог</a>
            <a href="about.html">О нас</a>
            <a href="delivery.html">Доставка и оплата</a>
          </div>
        </div>
        <div>
          <h4 class="footer__heading">Помощь</h4>
          <div class="footer__links">
            <a href="contacts.html">Контакты</a>
            <a href="delivery.html">Как заказать</a>
          </div>
        </div>
        <div>
          <h4 class="footer__heading">Контакты</h4>
          <div class="footer__links">
            <a href="tel:+79991234567">+7 (999) 123-45-67</a>
            <a href="mailto:hello@lanchini.ru">hello@lanchini.ru</a>
          </div>
        </div>
      </div>
      <div class="footer__bottom">&copy; 2025 LANCHINI. Все права защищены.</div>
    </div>
  </footer>

  <div class="notification" id="notification"></div>

  <script src="../js/data.js"></script>
  <script src="../js/cart.js"></script>
  <script src="../js/app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const params = new URLSearchParams(window.location.search);
      const id = parseInt(params.get('id'));
      const product = products.find(p => p.id === id);

      if (!product) {
        document.getElementById('product-content').innerHTML = '<p style="text-align:center;padding:60px;color:var(--text-light);">Товар не найден</p>';
        return;
      }

      document.title = product.name + ' — LANCHINI';
      document.getElementById('breadcrumb-name').textContent = product.name;

      const specsHTML = Object.entries(product.specs).map(([key, val]) =>
        `<tr><td>${key}</td><td>${val}</td></tr>`
      ).join('');

      document.getElementById('product-content').innerHTML = `
        <div class="product-gallery">
          <div class="product-gallery__main">${product.image}</div>
          <div class="product-gallery__thumbs">
            <div class="product-gallery__thumb active">${product.image}</div>
            <div class="product-gallery__thumb">&#127873;</div>
            <div class="product-gallery__thumb">&#9749;</div>
          </div>
        </div>
        <div class="product-details">
          <h1 class="product-details__title">${product.name}</h1>
          <div class="product-details__price">${product.price.toLocaleString('ru-RU')} &#8381;</div>
          <p class="product-details__desc">${product.details}</p>
          <div class="product-details__specs">
            <h3>Характеристики</h3>
            <table>${specsHTML}</table>
          </div>
          <div class="product-details__actions">
            <div class="quantity">
              <button class="quantity__btn" id="qty-minus">&#8722;</button>
              <input class="quantity__value" type="number" id="qty-input" value="1" min="1">
              <button class="quantity__btn" id="qty-plus">&#43;</button>
            </div>
            <button class="btn btn--primary" id="add-to-cart">В корзину</button>
          </div>
        </div>
      `;

      // Quantity controls
      const qtyInput = document.getElementById('qty-input');
      document.getElementById('qty-minus').addEventListener('click', () => {
        const v = parseInt(qtyInput.value);
        if (v > 1) qtyInput.value = v - 1;
      });
      document.getElementById('qty-plus').addEventListener('click', () => {
        qtyInput.value = parseInt(qtyInput.value) + 1;
      });

      // Add to cart
      document.getElementById('add-to-cart').addEventListener('click', () => {
        Cart.add(product.id, parseInt(qtyInput.value));
        showNotification('Товар добавлен в корзину');
      });

      // Similar products
      const similar = products.filter(p => p.id !== product.id).slice(0, 4);
      const grid = document.getElementById('similar-products');
      similar.forEach(p => grid.appendChild(createProductCard(p, '')));
    });
  </script>
</body>
</html>
