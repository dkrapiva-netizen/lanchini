<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Каталог подарочных чайных пар LANCHINI — выберите идеальный подарок.">
  <title>Каталог — LANCHINI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="container header__inner">
      <a href="../index.html" class="header__logo">LANCH<span>INI</span></a>
      <nav class="header__nav" id="nav">
        <a href="../index.html">Главная</a>
        <a href="catalog.html">Каталог</a>
        <a href="about.html">О нас</a>
        <a href="delivery.html">Доставка</a>
        <a href="contacts.html">Контакты</a>
      </nav>
      <div class="header__actions">
        <div class="header__search">
          <input type="text" id="search-input" placeholder="Поиск...">
          <button class="header__search-btn" id="search-btn">&#128269;</button>
        </div>
        <a href="cart.html" class="header__cart" id="cart-icon">
          &#128722;
          <span class="header__cart-count" id="cart-count" style="display:none;">0</span>
        </a>
        <button class="header__burger" id="burger" aria-label="Меню">
          <span></span><span></span><span></span>
        </button>
      </div>
    </div>
  </header>

  <!-- BREADCRUMB -->
  <div class="container">
    <div class="breadcrumb">
      <a href="../index.html">Главная</a> <span>&#8250;</span> Каталог
    </div>
  </div>

  <!-- CATALOG HEADER -->
  <div class="catalog-header">
    <h1 class="catalog-header__title">Каталог чайных пар</h1>
  </div>

  <!-- CATEGORY TABS -->
  <div class="catalog-tabs">
    <div class="container">
      <div class="catalog-tabs__inner">
        <button class="catalog-tab active" data-category="all">Все товары</button>
        <button class="catalog-tab" data-category="women">Для женщин</button>
        <button class="catalog-tab" data-category="men">Для мужчин</button>
      </div>
    </div>
  </div>

  <!-- CATALOG -->
  <section class="section">
    <div class="container">
      <div class="catalog-controls">
        <span class="catalog-controls__count" id="catalog-count"></span>
        <div class="catalog-controls__filter">
          <label>Цена от</label>
          <input type="number" id="price-from" placeholder="0">
          <label>до</label>
          <input type="number" id="price-to" placeholder="10000">
          <button id="filter-btn">Применить</button>
        </div>
        <div class="catalog-controls__sort">
          <select id="sort-select">
            <option value="default">По умолчанию</option>
            <option value="price-asc">Сначала дешёвые</option>
            <option value="price-desc">Сначала дорогие</option>
            <option value="name">По названию</option>
          </select>
        </div>
      </div>
      <div class="products-grid" id="catalog-grid">
        <!-- Products injected by JS -->
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <div class="footer__inner">
        <div>
          <div class="footer__brand">LANCH<span>INI</span></div>
          <p class="footer__about">Мы создаём подарочные чайные пары, которые приносят радость и украшают чаепитие.</p>
        </div>
        <div>
          <h4 class="footer__heading">Магазин</h4>
          <div class="footer__links">
            <a href="catalog.html">Каталог</a>
            <a href="about.html">О нас</a>
            <a href="delivery.html">Доставка и оплата</a>
          </div>
        </div>
        <div>
          <h4 class="footer__heading">Помощь</h4>
          <div class="footer__links">
            <a href="contacts.html">Контакты</a>
            <a href="delivery.html">Как заказать</a>
          </div>
        </div>
        <div>
          <h4 class="footer__heading">Контакты</h4>
          <div class="footer__links">
            <a href="tel:+79991234567">+7 (999) 123-45-67</a>
            <a href="mailto:hello@lanchini.ru">hello@lanchini.ru</a>
          </div>
        </div>
      </div>
      <div class="footer__bottom">&copy; 2025 LANCHINI. Все права защищены.</div>
    </div>
  </footer>

  <div class="notification" id="notification"></div>

  <script src="../js/data.js"></script>
  <script src="../js/cart.js"></script>
  <script src="../js/app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const grid = document.getElementById('catalog-grid');
      const countEl = document.getElementById('catalog-count');
      const sortSelect = document.getElementById('sort-select');
      const priceFrom = document.getElementById('price-from');
      const priceTo = document.getElementById('price-to');
      const filterBtn = document.getElementById('filter-btn');
      const tabs = document.querySelectorAll('.catalog-tab');

      let activeCategory = 'all';

      // Category tabs
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          activeCategory = tab.dataset.category;
          render();
        });
      });

      // Check for search query
      const params = new URLSearchParams(window.location.search);
      const searchQuery = params.get('search');
      if (searchQuery) {
        document.getElementById('search-input').value = searchQuery;
      }

      function render() {
        let filtered = [...products];

        // Category filter
        if (activeCategory !== 'all') {
          filtered = filtered.filter(p => p.category === activeCategory);
        }

        // Search filter
        const query = document.getElementById('search-input').value.trim().toLowerCase();
        if (query) {
          filtered = filtered.filter(p =>
            p.name.toLowerCase().includes(query) ||
            p.desc.toLowerCase().includes(query)
          );
        }

        // Price filter
        const from = parseFloat(priceFrom.value) || 0;
        const to = parseFloat(priceTo.value) || Infinity;
        filtered = filtered.filter(p => p.price >= from && p.price <= to);

        // Sort
        const sort = sortSelect.value;
        if (sort === 'price-asc') filtered.sort((a, b) => a.price - b.price);
        else if (sort === 'price-desc') filtered.sort((a, b) => b.price - a.price);
        else if (sort === 'name') filtered.sort((a, b) => a.name.localeCompare(b.name));

        grid.innerHTML = '';
        countEl.textContent = 'Найдено: ' + filtered.length + ' товаров';

        if (filtered.length === 0) {
          grid.innerHTML = '<p style="grid-column:1/-1;text-align:center;color:var(--text-light);padding:40px;">Товары не найдены</p>';
          return;
        }

        filtered.forEach(p => grid.appendChild(createProductCard(p, '')));
      }

      sortSelect.addEventListener('change', render);
      filterBtn.addEventListener('click', render);
      document.getElementById('search-btn').addEventListener('click', render);
      document.getElementById('search-input').addEventListener('keydown', (e) => {
        if (e.key === 'Enter') { e.preventDefault(); render(); }
      });

      render();
    });
  </script>
</body>
</html>
