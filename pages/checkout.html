<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Оформление заказа — LANCHINI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="container header__inner">
      <a href="../index.html" class="header__logo">LANCH<span>INI</span></a>
      <nav class="header__nav" id="nav">
        <a href="../index.html">Главная</a>
        <a href="catalog.html">Каталог</a>
        <a href="about.html">О нас</a>
        <a href="delivery.html">Доставка</a>
        <a href="contacts.html">Контакты</a>
      </nav>
      <div class="header__actions">
        <div class="header__search">
          <input type="text" id="search-input" placeholder="Поиск...">
          <button class="header__search-btn" id="search-btn">&#128269;</button>
        </div>
        <a href="cart.html" class="header__cart" id="cart-icon">
          &#128722;
          <span class="header__cart-count" id="cart-count" style="display:none;">0</span>
        </a>
        <button class="header__burger" id="burger" aria-label="Меню">
          <span></span><span></span><span></span>
        </button>
      </div>
    </div>
  </header>

  <!-- BREADCRUMB -->
  <div class="container">
    <div class="breadcrumb">
      <a href="../index.html">Главная</a> <span>&#8250;</span> <a href="cart.html">Корзина</a> <span>&#8250;</span> Оформление заказа
    </div>
  </div>

  <!-- CHECKOUT -->
  <section class="checkout-page">
    <div class="container">
      <h1 class="checkout-page__title">Оформление заказа</h1>

      <div class="checkout-layout">
        <form class="checkout-form" id="checkout-form">

          <div class="checkout-form__group">
            <h3>Контактные данные</h3>
            <div class="form-row">
              <div class="form-field">
                <label for="name">Имя *</label>
                <input type="text" id="name" name="name" required>
              </div>
              <div class="form-field">
                <label for="phone">Телефон *</label>
                <input type="tel" id="phone" name="phone" required placeholder="+7 (___) ___-__-__">
              </div>
            </div>
            <div class="form-row">
              <div class="form-field form-field--full">
                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" placeholder="для подтверждения заказа">
              </div>
            </div>
          </div>

          <div class="checkout-form__group">
            <h3>Адрес доставки</h3>
            <div class="form-row">
              <div class="form-field form-field--full">
                <label for="city">Город *</label>
                <input type="text" id="city" name="city" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-field form-field--full">
                <label for="address">Адрес (улица, дом, квартира) *</label>
                <input type="text" id="address" name="address" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-field">
                <label for="zip">Почтовый индекс</label>
                <input type="text" id="zip" name="zip">
              </div>
              <div class="form-field">
                <label for="delivery">Способ доставки</label>
                <select id="delivery" name="delivery">
                  <option value="courier">Курьер</option>
                  <option value="post">Почта России</option>
                  <option value="cdek">СДЭК</option>
                </select>
              </div>
            </div>
          </div>

          <div class="checkout-form__group">
            <h3>Комментарий</h3>
            <div class="form-row">
              <div class="form-field form-field--full">
                <label for="comment">Пожелания к заказу</label>
                <textarea id="comment" name="comment" placeholder="Например: позвоните за час до доставки"></textarea>
              </div>
            </div>
          </div>

          <button type="submit" class="btn btn--primary btn--full">Подтвердить заказ</button>
        </form>

        <!-- ORDER SUMMARY -->
        <div class="cart-summary" id="order-summary">
          <!-- Injected by JS -->
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <div class="footer__inner">
        <div>
          <div class="footer__brand">LANCH<span>INI</span></div>
          <p class="footer__about">Мы создаём подарочные чайные пары, которые приносят радость и украшают чаепитие.</p>
        </div>
        <div>
          <h4 class="footer__heading">Магазин</h4>
          <div class="footer__links">
            <a href="catalog.html">Каталог</a>
            <a href="about.html">О нас</a>
            <a href="delivery.html">Доставка и оплата</a>
          </div>
        </div>
        <div>
          <h4 class="footer__heading">Помощь</h4>
          <div class="footer__links">
            <a href="contacts.html">Контакты</a>
            <a href="delivery.html">Как заказать</a>
          </div>
        </div>
        <div>
          <h4 class="footer__heading">Контакты</h4>
          <div class="footer__links">
            <a href="tel:+79991234567">+7 (999) 123-45-67</a>
            <a href="mailto:hello@lanchini.ru">hello@lanchini.ru</a>
          </div>
        </div>
      </div>
      <div class="footer__bottom">&copy; 2025 LANCHINI. Все права защищены.</div>
    </div>
  </footer>

  <div class="notification" id="notification"></div>

  <script src="../js/data.js"></script>
  <script src="../js/cart.js"></script>
  <script src="../js/app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const items = Cart.getItems();
      const summary = document.getElementById('order-summary');
      const total = Cart.getTotal();

      if (items.length === 0) {
        window.location.href = 'cart.html';
        return;
      }

      let itemsHTML = '';
      items.forEach(item => {
        const p = products.find(pr => pr.id === item.id);
        if (!p) return;
        itemsHTML += `
          <div class="cart-summary__row">
            <span>${p.name} x${item.qty}</span>
            <span>${(p.price * item.qty).toLocaleString('ru-RU')} &#8381;</span>
          </div>
        `;
      });

      summary.innerHTML = `
        <h3 class="cart-summary__title">Ваш заказ</h3>
        ${itemsHTML}
        <div class="cart-summary__row">
          <span>Доставка</span>
          <span>${total >= 5000 ? 'Бесплатно' : '490 &#8381;'}</span>
        </div>
        <div class="cart-summary__row cart-summary__row--total">
          <span>Итого</span>
          <span>${(total >= 5000 ? total : total + 490).toLocaleString('ru-RU')} &#8381;</span>
        </div>
      `;

      // Form submit
      document.getElementById('checkout-form').addEventListener('submit', (e) => {
        e.preventDefault();
        Cart.clear();
        document.querySelector('.checkout-page .container').innerHTML = `
          <div style="text-align:center;padding:80px 0;">
            <div style="font-size:4rem;margin-bottom:16px;">&#10004;</div>
            <h1 class="checkout-page__title">Спасибо за заказ!</h1>
            <p style="color:var(--text-light);font-size:1.1rem;margin-bottom:24px;">Мы свяжемся с вами в ближайшее время для подтверждения.</p>
            <a href="../index.html" class="btn btn--primary">На главную</a>
          </div>
        `;
      });
    });
  </script>
</body>
</html>
